ahmed@EETHost:~/EETravel$ ./start.sh
ğŸœï¸ Starting Sahara Journeys Travel Platform...
==============================================
Node.js version: v18.20.8
ğŸ” Checking for existing server processes...
âš ï¸ Warning: .env file not found
Database connection may fail without proper environment variables
ğŸš€ Starting Sahara Journeys server...
Server will be available at: http://localhost:8080
Admin panel: http://localhost:8080/admin

Press Ctrl+C to stop the server
==============================================
Attempting to connect with URL: postgresql://neondb_owner:****@ep-frosty-sunset-a85ha3la-pooler.eastus2.azure.neon.tech/neondb?sslmode=require
Database connection established successfully
âš ï¸ Vite import failed, using fallback configuration
â³ Waiting for database initialization...
âœ… Database initialized.
ğŸ” Setting up admin users...
âŒ Error setting up admin users: PostgresError: relation "users" does not exist
    at ErrorResponse (file:///home/ahmed/EETravel/node_modules/postgres/src/connection.js:788:26)
    at handle (file:///home/ahmed/EETravel/node_modules/postgres/src/connection.js:474:6)
    at TLSSocket.data (file:///home/ahmed/EETravel/node_modules/postgres/src/connection.js:315:9)
    at TLSSocket.emit (node:events:517:28)
    at addChunk (node:internal/streams/readable:368:12)
    at readableAddChunk (node:internal/streams/readable:341:9)
    at Readable.push (node:internal/streams/readable:278:10)
    at TLSWrap.onStreamRead (node:internal/stream_base_commons:190:23) {
  severity_local: 'ERROR',
  severity: 'ERROR',
  code: '42P01',
  position: '485',
  file: 'parse_relation.c',
  line: '1449',
  routine: 'parserOpenTable'
}
âœ… Admin setup completed
âœ… Unified auth setup completed
âœ… Hero slides routes setup completed
âœ… Routes registered successfully
Vite setup skipped due to configuration error - serving static files
8:40:45 AM [express] serving on port 8080
ğŸ”§ Initializing database...
ğŸ“‹ Creating database schema...
âœ… Database schema created successfully
ğŸ”„ Checking database setup...
{
  severity_local: 'NOTICE',
  severity: 'NOTICE',
  code: '42701',
  message: 'column "slug" of relation "packages" already exists, skipping',
  file: 'tablecmds.c',
  line: '7471',
  routine: 'check_for_column_name_collision'
}
âœ… Ensured packages table has slug column
{
  severity_local: 'NOTICE',
  severity: 'NOTICE',
  code: '42P07',
  message: 'relation "countries" already exists, skipping',
  file: 'parse_utilcmd.c',
  line: '207',
  routine: 'transformCreateStmt'
}
âœ… Ensured countries table exists
âœ… Ensured nationalities table exists
âœ… Ensured visas table exists
âœ… Ensured nationality_visa_requirements table exists
âœ… All necessary visa tables are created
âœ… Database setup complete!
ğŸ” Setting up admin users...
âŒ Error setting up admin users: PostgresError: relation "users" does not exist
    at ErrorResponse (file:///home/ahmed/EETravel/node_modules/postgres/src/connection.js:788:26)
    at handle (file:///home/ahmed/EETravel/node_modules/postgres/src/connection.js:474:6)
    at TLSSocket.data (file:///home/ahmed/EETravel/node_modules/postgres/src/connection.js:315:9)
    at TLSSocket.emit (node:events:517:28)
    at addChunk (node:internal/streams/readable:368:12)
    at readableAddChunk (node:internal/streams/readable:341:9)
    at Readable.push (node:internal/streams/readable:278:10)
    at TLSWrap.onStreamRead (node:internal/stream_base_commons:190:23) {
  severity_local: 'ERROR',
  severity: 'ERROR',
  code: '42P01',
  position: '485',
  file: 'parse_relation.c',
  line: '1449',
  routine: 'parserOpenTable'
}
ğŸ·ï¸ Seeding package categories...
ğŸ·ï¸ Seeding package categories...
âŒ Error seeding package categories: PostgresError: relation "package_categories" does not exist
    at ErrorResponse (file:///home/ahmed/EETravel/node_modules/postgres/src/connection.js:788:26)
    at handle (file:///home/ahmed/EETravel/node_modules/postgres/src/connection.js:474:6)
    at TLSSocket.data (file:///home/ahmed/EETravel/node_modules/postgres/src/connection.js:315:9)
    at TLSSocket.emit (node:events:517:28)
    at addChunk (node:internal/streams/readable:368:12)
    at readableAddChunk (node:internal/streams/readable:341:9)
    at Readable.push (node:internal/streams/readable:278:10)
    at TLSWrap.onStreamRead (node:internal/stream_base_commons:190:23) {
  severity_local: 'ERROR',
  severity: 'ERROR',
  code: '42P01',
  position: '107',
  file: 'parse_relation.c',
  line: '1449',
  routine: 'parserOpenTable'
}
âŒ Error seeding package categories: PostgresError: relation "package_categories" does not exist
    at ErrorResponse (file:///home/ahmed/EETravel/node_modules/postgres/src/connection.js:788:26)
    at handle (file:///home/ahmed/EETravel/node_modules/postgres/src/connection.js:474:6)
    at TLSSocket.data (file:///home/ahmed/EETravel/node_modules/postgres/src/connection.js:315:9)
    at TLSSocket.emit (node:events:517:28)
    at addChunk (node:internal/streams/readable:368:12)
    at readableAddChunk (node:internal/streams/readable:341:9)
    at Readable.push (node:internal/streams/readable:278:10)
    at TLSWrap.onStreamRead (node:internal/stream_base_commons:190:23) {
  severity_local: 'ERROR',
  severity: 'ERROR',
  code: '42P01',
  position: '107',
  file: 'parse_relation.c',
  line: '1449',
  routine: 'parserOpenTable'
}
âœ… Package categories seeding complete
ğŸŒ± Seeding data...
âŒ Database initialization failed: PostgresError: column "created_by" does not exist
    at ErrorResponse (file:///home/ahmed/EETravel/node_modules/postgres/src/connection.js:788:26)
    at handle (file:///home/ahmed/EETravel/node_modules/postgres/src/connection.js:474:6)
    at TLSSocket.data (file:///home/ahmed/EETravel/node_modules/postgres/src/connection.js:315:9)
    at TLSSocket.emit (node:events:517:28)
    at addChunk (node:internal/streams/readable:368:12)
    at readableAddChunk (node:internal/streams/readable:341:9)
    at Readable.push (node:internal/streams/readable:278:10)
    at TLSWrap.onStreamRead (node:internal/stream_base_commons:190:23) {
  severity_local: 'ERROR',
  severity: 'ERROR',
  code: '42703',
  hint: 'Perhaps you meant to reference the column "destinations.created_at".',
  position: '126',
  file: 'parse_relation.c',
  line: '3723',
  routine: 'errorMissingColumn'
}
